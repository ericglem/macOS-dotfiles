# ------------------------ SKHD CONFIG FILE -------------------------

cmd - return: open -na /Applications/Alacritty.app

# Open alacritty with lf running
cmd - f : \
    yabai -m signal --add \
             label=float_next \
             event=application_launched \
             action="yabai -m signal --remove float_next;\
                     skhd --key \"ctrl - x\" && skhd --key \"ctrl - f\"";\
    open -na /Applications/Alacritty.app

# Show current diet on a borderless, centered, floating window
cmd + shift - n : \
    yabai -m signal --add \
             label=float_next \
             event=application_launched \
             action="yabai -m signal --remove float_next;\
                     SPAWN_ID=$(yabai -m query --windows | jq -r ".[] | select(.pid==$YABAI_PROCESS_ID).id");\
                     yabai -m window $SPAWN_ID --toggle border;\
                     yabai -m window $SPAWN_ID --toggle topmost;\
                     yabai -m window $SPAWN_ID --toggle float;\
                     yabai -m window $SPAWN_ID --resize abs:312:600;\
                     yabai -m window $SPAWN_ID --move abs:869:200;\
                     skhd --key \"ctrl - x\" && skhd --key \"ctrl - n\"";\
    open -na /Applications/Alacritty.app

cmd - b [
    #*          : open -na /Applications/Firefox.app
    *          : open -na /Applications/Vivaldi.app --args --debug-packed-apps --silent-debugger-extension-api --enable-features=OverlayScrollbar
    "Firefox"  ~
    "Vivaldi"  : skhd --key "cmd + alt - b"
]

cmd - e [
    "Firefox"  : skhd --key "shift + alt - y"
    "Vivaldi"  : skhd --key "alt + cmd - e"
]

cmd - d [
    "Firefox"  : skhd --key "f4"
    "Vivaldi"  : skhd --key "alt + cmd - l"
]

cmd - s [
    "Firefox"  : false
    "Vivaldi"  : false
]

# Extend same focus-switching keys to tmux panes
# Fuck this, I don't think you can do it properly
#alt - up [
#    *           : yabai -m window --focus north
#    "Alacritty" : if [ $(tmux display-message -p '#{pane_at_top}') -ne 1 ]; then tmux select-pane -U; else yabai -m window --focus north || true; fi
#]
#alt - down [
#    *           : yabai -m window --focus south
#    "Alacritty" : if [ $(tmux display-message -p '#{pane_at_bottom}') -ne 1 ]; then tmux select-pane -D; else yabai -m window --focus south || true; fi
#]
#alt - left [
#    *           : yabai -m window --focus west
#    "Alacritty" : if [ $(tmux display-message -p '#{pane_at_left}') -ne 1 ]; then tmux select-pane -L; else yabai -m window --focus west; fi
#]
#alt - right [
#    *           : yabai -m window --focus east
#    "Alacritty" : if [ $(tmux display-message -p '#{pane_at_right}') -ne 1 ]; then tmux select-pane -R; else yabai -m window --focus east; fi
#]

# Switch focus
alt - up: yabai -m window --focus north
alt - down: yabai -m window --focus south
alt - left: yabai -m window --focus west
alt - right: yabai -m window --focus east

# Resize
alt - h: yabai -m window --resize left:-25:0
alt - j: yabai -m window --resize bottom:0:25
alt - k: yabai -m window --resize top:0:-25
alt - l: yabai -m window --resize right:25:0

ctrl - h: yabai -m window --resize right:-25:0
ctrl - j: yabai -m window --resize top:0:25
ctrl - k: yabai -m window --resize bottom:0:-25
ctrl - l: yabai -m window --resize left:25:0

# Swap windows
ctrl - up: yabai -m window --swap north
ctrl - down: yabai -m window --swap south
ctrl - left: yabai -m window --swap west
ctrl - right: yabai -m window --swap east

# Focus space
alt - 1: yabai -m space --focus 1
alt - 2: yabai -m space --focus 2
alt - 3: yabai -m space --focus 3
alt - 4: yabai -m space --focus 4

# Mirror, rotate, balance space
alt - x: yabai -m space --mirror x-axis
alt - y: yabai -m space --mirror y-axis
alt - r: yabai -m space --rotate 90
alt - b: yabai -m space --balance

# Create, destroy, move space
alt - w: yabai -m space --destroy && yabai -m space --focus prev
alt - n: yabai -m space --create && yabai -m space --focus last
alt - q: yabai -m space --move prev
alt - p: yabai -m space --move next

# Move window to space and follow focus
alt + cmd - 1: yabai -m window --space 1 && yabai -m space --focus 1
alt + cmd - 2: yabai -m window --space 2 && yabai -m space --focus 2
alt + cmd - 3: yabai -m window --space 3 && yabai -m space --focus 3
alt + cmd - 4: yabai -m window --space 4 && yabai -m space --focus 4

# Move window to new space and follow focus
alt + cmd - n: yabai -m space --create && yabai -m window --space last && yabai -m space --focus last

# Take screenshots
#shift + cmd - 3: screencapture ~/Dropbox/Screenshots/$(/usr/local/opt/coreutils/libexec/gnubin/date --rfc-3339=seconds | sed 's/+.*$//;s/ /@/;s/-/:/g').png
#shift + cmd - 4: screencapture -i ~/Dropbox/Screenshots/$(/usr/local/opt/coreutils/libexec/gnubin/date --rfc-3339=seconds | sed 's/+.*$//;s/ /@/;s/-/:/g').png
