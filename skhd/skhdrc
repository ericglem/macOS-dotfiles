# ------------------------ SKHD CONFIG FILE -------------------------

# Open a new terminal window
cmd - return : open -na /Applications/Alacritty.app

# Launch lf in downloads folder
cmd - f : /Applications/Alacritty.app/Contents/MacOS/alacritty -e lf ~/Downloads

# Launch calcurse
cmd - a : /Applications/Alacritty.app/Contents/MacOS/alacritty -e calcurse -C ~/.config/calcurse -D ~/.local/share/calcurse

# Launch the browser. If focused window is a browser, open bookmarks sidebar
cmd - b [
    *         : open -na /Applications/Vivaldi.app
    "Firefox" ~
    "Vivaldi" : skhd --key "alt + cmd - b"
]

# If focused window is a browser, open downloads sidebar
cmd - d [
    "Firefox" : skhd --key "f4"
    "Vivaldi" : skhd --key "alt + cmd - l"
]

# If focused window is a browser, open bitwarden sidebar
cmd - e [
    "Firefox" : skhd --key "shift + alt - y"
    "Vivaldi" : skhd --key "alt + cmd - e"
]

# Disable cmd-s in some programs
cmd - s [
    "Firefox" : false
    "Vivaldi" : false
]

# Disable cmd-m in every program
cmd - m : false

# Focus windows
alt - up    : yabai -m window --focus north
alt - down  : yabai -m window --focus south
alt - left  : yabai -m window --focus west
alt - right : yabai -m window --focus east

# Swap windows
ctrl - up    : yabai -m window --swap north
ctrl - down  : yabai -m window --swap south
ctrl - left  : yabai -m window --swap west
ctrl - right : yabai -m window --swap east

# Warp windows
alt + shift - up    : yabai -m window --warp north
alt + shift - down  : yabai -m window --warp south
alt + shift - left  : yabai -m window --warp west
alt + shift - right : yabai -m window --warp east

# Make windows larger
alt - h : yabai -m window --resize left:-25:0
alt - j : yabai -m window --resize bottom:0:25
alt - k : yabai -m window --resize top:0:-25
alt - l : yabai -m window --resize right:25:0

# Make windows smaller
ctrl - h : yabai -m window --resize right:-25:0
ctrl - j : yabai -m window --resize top:0:25
ctrl - k : yabai -m window --resize bottom:0:-25
ctrl - l : yabai -m window --resize left:25:0

# Move windows to spaces and follow focus
alt + cmd - n : yabai -m space --create && \
                yabai -m window --space last && yabai -m space --focus last
alt + cmd - 1 : yabai -m window --space 1 && yabai -m space --focus 1
alt + cmd - 2 : yabai -m window --space 2 && yabai -m space --focus 2
alt + cmd - 3 : yabai -m window --space 3 && yabai -m space --focus 3
alt + cmd - 4 : yabai -m window --space 4 && yabai -m space --focus 4
alt + cmd - 5 : yabai -m window --space 4 && yabai -m space --focus 5

# Focus spaces
alt - 1 : yabai -m space --focus 1
alt - 2 : yabai -m space --focus 2
alt - 3 : yabai -m space --focus 3
alt - 4 : yabai -m space --focus 4

# Move spaces
ctrl + cmd - 1: yabai -m space --move 1
ctrl + cmd - 2: yabai -m space --move 2
ctrl + cmd - 3: yabai -m space --move 3
ctrl + cmd - 4: yabai -m space --move 4
ctrl + cmd - 5: yabai -m space --move 5

# Create, destroy, mirror, rotate, balance spaces
alt - n : yabai -m space --create && yabai -m space --focus last
alt - w : yabai -m space --destroy && yabai -m space --focus prev
alt - x : yabai -m space --mirror x-axis
alt - y : yabai -m space --mirror y-axis
alt - r : yabai -m space --rotate 90
alt - b : yabai -m space --balance

# Screenshot the whole screen
shift + cmd - 3 : screencapture ~/Dropbox/Screenshots/whole_$(/usr/local/opt/coreutils/libexec/gnubin/date --rfc-3339=seconds | sed 's/+.*$//;s/ /@/;s/-/:/g').png

# Screenshot a portion of the screen
shift + cmd - 4 : screencapture -i ~/Dropbox/Screenshots/portion_$(/usr/local/opt/coreutils/libexec/gnubin/date --rfc-3339=seconds | sed 's/+.*$//;s/ /@/;s/-/:/g').png

# Show current diet on a centered, floating window
alt + shift - d : \
    yabai -m signal --add \
             label=float_next \
             event=application_launched \
             action="yabai -m signal --remove float_next; \
                     SPAWN_ID=$(yabai -m query --windows | jq -r ".[] | select(.pid==$YABAI_PROCESS_ID).id"); \
                     yabai -m window $SPAWN_ID --toggle topmost; \
                     yabai -m window $SPAWN_ID --toggle float; \
                     yabai -m window $SPAWN_ID --resize abs:312:600; \
                     yabai -m window $SPAWN_ID --move abs:869:200; \
                     skhd --key \"ctrl - x\" && skhd --key \"ctrl - n\""; \
    open -na /Applications/Alacritty.app

# Extend same focus-switching keys to tmux panes
# Fuck this, I don't think you can do it properly
#alt - up [
#    *           : yabai -m window --focus north
#    "Alacritty" : if [ $(tmux display-message -p '#{pane_at_top}') -ne 1 ]; then tmux select-pane -U; else yabai -m window --focus north || true; fi
#]
#alt - down [
#    *           : yabai -m window --focus south
#    "Alacritty" : if [ $(tmux display-message -p '#{pane_at_bottom}') -ne 1 ]; then tmux select-pane -D; else yabai -m window --focus south || true; fi
#]
#alt - left [
#    *           : yabai -m window --focus west
#    "Alacritty" : if [ $(tmux display-message -p '#{pane_at_left}') -ne 1 ]; then tmux select-pane -L; else yabai -m window --focus west; fi
#]
#alt - right [
#    *           : yabai -m window --focus east
#    "Alacritty" : if [ $(tmux display-message -p '#{pane_at_right}') -ne 1 ]; then tmux select-pane -R; else yabai -m window --focus east; fi
#]
